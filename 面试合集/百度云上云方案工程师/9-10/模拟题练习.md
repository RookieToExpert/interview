# 百度云架构师面试题复习手册（30题完整版）

## 3. SLA 99.99% 架构设计
- **部署**：多AZ/跨Region容灾  
- **组件**：CCE集群+负载均衡BLB+对象存储BOS多副本  
- **RTO/RPO**：分钟级切换、秒级恢复  
- **演练**：定期灾备演练  

---

## 4. 应对业务流量突增 10倍
- **预测**：监控+历史流量建模  
- **自动扩缩容**：CCE HPA、弹性伸缩组（ASG）  
- **流量治理**：ITM全局流量调度+CDN边缘限流
  - CDN限速：视频点播服务，为了公平，限制单用户最大下载速率 10Mbps，开放平台 API 接口，免费用户每秒最多 50 次请求。
- **压测**：百度云性能压测服务  

---

## 5. 跨地域/跨地容灾
- **数据同步**：RDS 异步/半同步复制、BOS跨区域复制  
- **切换**：手动或自动Failover（ITM）  
- **一致性**：最终一致 or 强一致取舍  
- **演练**：定期跨Region切换  

---

## 6. 混合云互通设计
- **网络方案**：专线/VPN接入 → VPC  
- **多地互联**：云企业网CEN  
- **优化**：路由规划+QoS策略（Quality of Service））
  - 路由规划：IDC（上海 VPN 连接） → 最近 Region（华东 VNet）
  - QoS策略：交易系统（北京 VNet）：设置为高优先级，保证 50% 最低带宽
- **加速**：CDN+智能调度
  - 给用户分配一个最优边缘节点 IP（一般在用户最近的城市/运营商机房）。

---

## 7. 多云与避免厂商锁定
- **抽象层**：CCE（K8s容器）、服务网格（Istio）
  - 用K8s跑容器，配Istio做服务发现，可以随时把集群迁到其他云
- **IaC**：Terraform Provider for Baidu Cloud
  - Terraform管理，迁移时可以只需要换provider，而不是重写脚本  
- **统一管理**：IAM集中权限管理
  - 用一个统一的身份平台，比如AD/LDAP而不是云厂商的IAM
- **成本**：费用中心统一统计
  - 用第三方FinOps平台比如CloudHealth等

---

## 8. FinOps 成本优化
- **账单管理**：费用中心+资源标签
  - 给每个资源加标签：Dept=研发、Dept=市场、Project=APP1，在费用中心里，按标签或账号来分摊账单。
- **分析**：热点/闲置资源
  - 开启 云监控服务（Baidu Cloud Monitor）分析CPU、内存、磁盘 IOPS 的长期平均利用率和存储桶/对象访问频率（多久没有访问）等。
- **降本**：预留实例、Savings Plan(百度智能云貌似没有)、冷热分层存储（BOS IA/归档存储）
  - 核心服务用的 VM → 购买 1 年期预留实例（RI），费用可降 30%-60%
  - 历史订单数据放到 冷存储（BOS Infrequent Access/IA） 
- **自动化**：CFC函数定时关机/释放资源  

---

## 9. 微服务架构治理
- **服务治理**：CCE+Istio，注册发现、熔断、限流、灰度发布
  - 不需要写死 IP，服务之间通过 DNS/服务网格自动发现，下游服务不可用时，自动中断调用链，避免雪崩，限制请求 QPS，避免某个服务被打爆，支持 10% 流量走新版本，90% 走旧版本，实现 A/B Test、平滑升级。
- **配置中心**：统一配置与版本回滚
  - 云上常用 配置中心（如 Apollo、百度云配置服务）：统一下发配置，支持灰度配置（先给 10% 服务更新配置），配置回滚（配置错误时立即回退）
- **观测性**：日志服务BLS+链路追踪SkyWalking
  - 集中日志采集 → 查询、分析，分布式调用链追踪 → 查清楚一个请求从用户入口 → 网关 → Service A → Service B 的全过程耗时， 指标监控（Prometheus + Grafana）

---

## 10. 基础设施即代码（IaC）
- **工具**：Terraform、Ansible、Pulumi（百度云Provider支持）  
- **规范**：模块化、环境隔离（dev/stage/prod）  
- **状态管理**：Terraform state 存储在 BOS  
- **优势**：自动化部署+合规检查  

---

## 11. 数据库扩展瓶颈
- **措施**：
  - **读写分离（RDS主从）**
    - 百度云 RDS MySQL/SQL Server 自带主从架构，支持读写分，在应用层可以通过JDBC 读写分离插件，负载均衡代理（Mycat、ProxySQL）实现读写分离。
  - **分库分表（ShardingSphere on CCE）**
    - 按业务维度（用户 ID、地区）把数据分散到多个库，把大表按规则拆分成多张小表（如 user_id % 10），然后部署 ShardingSphere on CCE（百度容器引擎），让应用透明使用分库分表能力。 
  - **缓存双写一致（Redis+消息队列）**
    - 百度云缓存 Redis + 百度云消息队列（Kafka/Pulsar），用户更新商品 → 写 MySQL，同时写 Redis(更新时写 MySQL + 写 Redis，保证缓存里有最新数据。读取时大部分走 Redis，MySQL 的读压力几乎消失。)，如果写入redis失败 → Kafka 里有一条消息异步补偿更新缓存，把高并发读请求挡在缓存层，数据库压力显著降低。
  - **数据中台（Baidu BigData Platform）**
    - 百度云大数据平台（Palo/StarRocks、Hive、Flink），MySQL binlog → 数据同步（DataX/Flink CDC）→ StarRocks → 给 BI 系统查询
      - 场景：业务数据库 (MySQL/RDS) → 主要用来处理交易请求，比如下单、支付、更新库存，但公司也会有很多 分析类需求比如要跑报表（销量统计、GMV），推荐系统要实时拿数据训练模型等如果直接在业务 MySQL 上跑会导致 数据库压力过大，所以要把分析型查询 迁移到大数据平台（数据中台）。
      - 具体流程：用户下单，数据进入 MySQL（核心业务库），通过 MySQL binlog 把增量数据采集出来，用 DataX（离线批处理） 或 Flink CDC（实时流处理） 把数据同步到大数据平台。数据进入百度大数据平台组件，比如StarRocks/Palo：适合实时分析（OLAP 引擎），Hive：适合批量离线计算Flink：适合实时流计算。再到BI系统比如百度自家 BI 工具直接查询 StarRocks，而不是查 MySQL，报表系统、推荐系统、风控系统都可以基于大数据平台的数据。

---

## 12. 零信任安全架构
- **措施**：
  - **身份联合（IAM+SSO）**
    - 场景：一家企业使用多个云平台（如阿里云、AWS、Azure）和内部业务系统（OA、ERP、GitLab），如果每个平台都要单独登录，运维效率低、安全性差。
    - 操作：建立企业统一身份源（IdP，例如 Azure AD、Okta、金山通行证），配置 SSO（单点登录），通过 SAML 或 OIDC 协议对接云服务或第三方 SaaS。  
  - **STS临时凭证**
    - 开发团队需要访问 OSS/S3 存储，传统方式是长期保存 AccessKey，一旦泄露风险极大，使用 STS（Security Token Service） 给开发人员或应用下发临时凭证（通常几分钟到几小时过期），又或者某个微服务需要下载文件 → 它通过 IAM 角色请求 STS → 获取短期 Token → 用完即过期。。  
  - **RBAC/ABAC最小权限**
    - 场景：RBAC（基于角色的访问控制）：运维只需要读日志权限，而不是数据库写权限。ABAC（基于属性的访问控制）：比如规定「仅限北京地区、工作日 9 点到 18 点的请求」才能访问某 API。
    - 操作：定义细粒度的角色（开发、运维、安全审计），按照“最小权限原则”，只授予完成工作所需的最小操作权限。
  - **基线巡检（百度安全中心）**
    - 场景：某企业运维 100 台 Linux 服务器，经常出现弱口令、未打补丁、端口暴露等问题。人工逐台检查不现实。
    - 操作：借助 安全基线巡检工具（如百度安全中心、阿里云 HSS、Azure Security Center），自动扫描配置是否符合安全基线（如 CIS Benchmark、等保要求），例子：检查是否关闭 root 远程登录、是否开启防火墙、是否启用 TLS1.2+。定期生成巡检报告，配合整改计划。  

---

## 13. 合规与数据出境
- **能力**：
  - KMS+双层加密
    - 场景：一家跨国公司要把用户订单数据存到云上，但涉及 敏感数据（身份证、银行卡），需要符合等保 / GDPR 要求。
    - 操作：使用云厂商的 KMS（密钥管理服务） 管理加密密钥，数据存储时，采用 双层加密，第一层：存储服务（如对象存储 BOS、数据库 RDS）自带的加密。第二层：应用层再用 KMS 下发的密钥加一层加密。
  > 加密：在百度云 KMS 控制台，新建一个 CMK（比如 video-cmk）→ 本地调用CMK获得明文data key加密 → 将加密文件和密文data key上传至BOS → 通过BOS自带SSE加密
  > 调用：应用 → BOS 拿文件 + 密文 Data Key → 应用 → KMS 解密 Data Key → 应用 → 用明文 Data Key 解密文件。
  - **脱敏处理**
    - 场景：一家电商公司要把交易日志发给第三方风控厂商做建模，但日志里有用户手机号和身份证号。
    - 在数据导出前做 脱敏：手机号 138****5678等，保证分析和建模能继续进行，但不会泄露完整隐私数据。
  - **BYOK/HYOK（自主管理密钥）**
    - 场景：一家金融企业要把用户交易数据放在云数据库里，但合规要求规定：密钥必须由客户自己保管，云厂商不能单独解密数据。
    - 操作：企业自己在本地 HSM（硬件安全模块）生成密钥。把密钥上传到云厂商的 KMS，但只存加密片段，完整密钥仍在客户侧。数据加解密必须经过客户的密钥管理系统批准。 
  - **满足等保、ISO、数据跨境监管**
    - 场景：一家跨国互联网公司要把中国用户的数据同步到新加坡的数据中心做 BI 分析，但需要满足：国内《等保 2.0》，ISO27001 安全认证，《个人信息保护法》关于数据出境的要求
    - 操作：做敏感字段脱敏，使用 KMS 双层加密，全链路 TLS1.2+ 加密，使用 VPN/专线保障传输安全，在新加坡侧启用日志审计，保证数据使用有迹可循，建立 跨境数据访问监控，确保数据不被非法滥用

---

## 14. 端到端可观测性
- **组件**：
  - **指标（Cloud Monitor）**
    - 场景：电商平台在大促活动时，流量陡增。需要实时监控 CPU、内存、带宽、QPS、延迟 等指标，防止宕机。
    - 操作：在 云监控（Cloud Monitor） 中为每个服务设置指标采集（如 K8s Pod CPU 使用率）。配置阈值（比如 CPU>80% 持续 5 分钟触发告警）。将告警推送到企业微信/钉钉群，触发自动扩容脚本。  
  - **日志（BLS日志服务）**
    - 场景：某 API 请求失败率突然升高，需要快速定位是应用 Bug、数据库慢查询还是第三方依赖异常。
    - 操作：应用所有日志（Nginx、应用、数据库 SlowLog）集中写入 BLS 日志服务。使用结构化日志（JSON 格式）+ 索引，支持关键字搜索。通过可视化查询（例如搜索 5xx 错误日志）快速定位到具体服务和调用链路。 
  - **链路追踪（SkyWalking）**
    - 场景：一个用户下单请求会经过 前端 → API Gateway → 微服务 A → 微服务 B → 数据库，如果耗时很长，必须知道瓶颈在哪里。
    - 操作：在微服务中接入 SkyWalking Agent，自动采集调用链路。用户请求会生成一个 TraceID，可以看到每个环节的耗时。例如：发现微服务 B 的数据库查询耗时 2s → 定位到缺失索引问题 → 立即优化 SQL。   
  - **事件总线（EventBridge）**
    - 场景：当系统出现异常（如订单服务调用失败率 >5%），不仅要告警，还要触发自动化处理（比如回滚流量、通知业务方）。
    - 操作：配置 EventBridge 作为事件中心，接收监控、日志、链路追踪发出的异常事件。设定规则，比如“当订单服务失败率 >5%” → 自动调用 Lambda/函数计算 → 执行流量切换或回滚操作。   
- **统一告警**：SLO/SLA/SLI

---

## 15. Serverless 应用场景
- **平台：百度云 CFC函数计算**
  - 场景：某电商平台想实现一个 “用户上传图片 → 自动生成缩略图” 的功能。以往需要部署一台长期运行的服务器处理。
  - 操作：在 百度云 CFC 函数计算 中创建一个函数，触发源设置为 对象存储 BOS 上传事件。用户上传图片到 BOS → 触发 CFC 函数 → 函数内调用图像处理 SDK → 生成缩略图并回写存储。
- **优势：事件驱动，自动伸缩，低成本**
  - 场景：事件驱动：企业需要在订单生成时自动发短信通知客户。自动伸缩：订单量从平时的 1000/小时暴增到 10 万/小时。低成本：一个内部工具每天只运行几次（比如生成日报）。
  - 操作：事件驱动：订单系统写入 Kafka Topic → 触发函数计算 → 调用短信 API。自动伸缩：CFC 根据并发请求量自动拉起更多函数实例处理，不需要人工扩容。低成本：用函数计算代替常驻服务器，每次调用只花几毫秒计费。
- **考量：冷启动、并发限制、成本与调试复杂度**
  - 场景：第一次调用函数，启动耗时 500ms，比后续热调用慢。对 低延迟场景（如 API 网关实时接口）有影响。如果函数默认并发限制 1000，而双 11 流量是 1 万并发，可能丢请求。团队开发一个复杂业务流程（订单 → 支付 → 库存 → 通知），如果拆成多个函数，调试时需要跨服务追踪。  

---

## 16. 企业级 API 管理
- **API网关：认证（OAuth2/JWT/AKSK/MTLS）**
  - 场景：一家金融企业对外开放支付 API，如果没有认证机制，任何人都能调用接口，风险极大。
  - 操作：AK/SK：通过百度云 API 网关 → 配置密钥认证，开发者调用时必须携带 AccessKey/SecretKey。接入百度智能云 API 网关支持的 OAuth2 流程，适合移动应用或 SaaS 平台接入。API 网关支持自定义认证插件，可以解析并校验 JWT Token，适合微服务内部调用。在 API 网关上开启双向 TLS，要求客户端必须携带证书，适合企业级内部对接（比如支付系统）。
- **限流：配额与QPS限制**
  - 场景：双十一电商活动期间，订单 API 调用量激增，如果没有限流保护，可能压垮后台系统。
  - 操作：在 API 网关中设置 流量控制策略：QPS 限制：比如接口最大支持 500 次/秒。配额限制：比如某个开发者每天最多调用 10 万次。
- **版本管理：多版本并存：**
  - 场景：企业在百度云上部署的“订单 API”，老版本 v1 返回 price，新版本 v2 增加 currency 字段，需要逐步升级客户调用。
  - 操作：在 百度云 API 网关中创建 多版本 API，例如v1和v2，在控制台配置 流量分流：先让部分用户试用 v2，其他用户仍走 v1。
- **文档治理：OpenAPI/Swagger:**
  - 场景：多个团队都在维护 API，如果没有统一规范，接口定义混乱，前后端对接效率低。
  - 操作：使用 OpenAPI/Swagger 定义 API（请求参数、返回字段、错误码）。自动生成文档 + SDK，前端可以直接调用。配合 API 网关，开发者在门户网站即可查看 API 文档、调试接口。

---

## 17. 跨团队标准化落地
- **规范**：统一资源标签命名、环境基线固化
  - 场景：当一个企业的云环境越来越大，不同团队（研发、运维、测试、数据团队）都会在云上创建资源，每个团队可能有自己的命名习惯、标签风格、环境划分方式
  - 操作：统一资源标签命名，不同环境的配置标准化，生产环境 VM 至少 2 个可用区 + 监控告警开启，测试环境 VM 可以只开单 AZ、无备份
- **挑战**：阻力、影响大  
- **措施**：高层背书、度量合规率、建立落地指引
  - CTO / 架构委员会统一要求，不是单个团队自发搞。建立自动化检查工具，百度 IAM 策略，定期出报表：合规率多少？哪个团队不达标？给团队一个标准模版，降低执行难度。

---

## 18. Region 故障事件响应
- **监控检测（Cloud Monitor+第三方）**：
  - 场景：华东 Region 的 API 响应时间飙升，错误率增加。
  - 操作：百度云监控（Cloud Monitor，BCM） → 自动采集指标（如 API 错误率、RT、磁盘 IOPS）。阈值告警触发，推送到 百度消息中心，或联动 语音/短信通知。第三方监控（如 Prometheus）：可以通过 百度云 Prometheus 托管服务，结合 Grafana 报警。设置指标规则：HTTP 5xx > 5%，触发 BCM 告警 → 通知 oncall SRE。
- **临时措施：ITM流量切换、跨Region多活**：
  - 使用百度云全局流量管理（ITM），在 ITM 策略里修改权重/健康检查策略。将原本指向北京 Region 的 70% 流量切换到广州 Region（100%）。
- **War Room沟通**:
  - 在 百度Hi/百度会议 快速拉起 War Room（音视频会议）,技术同学实时共享 百度云日志服务（BLS） 的报错日志。
- **升级路径：技术→管理→客户沟通** 
  - SRE 确认是 百度云CBS存储 故障，预计修复时间 1 小时。评估影响面，是否需要紧急 SLA 补偿。通过 百度智能云状态页（Status Page） 发布公告。重点大客户通过 百度云工单系统 或专线客户经理群及时同步。  

---

## 19. 安全左移（Shift Left）
- **威胁建模**：
  - 场景：你在设计一个大型电商平台，需要考虑支付安全、用户隐私和高并发场景。
  - 操作：在设计阶段引入 百度安全实验室 提供的威胁建模方法论。假设攻击者可能发起 SQL 注入、XSS、未授权访问、DDoS 等攻击。结合百度安全专家的攻击库，快速列出常见风险点。输出威胁建模报告，并在开发规范里明确对应防护措施（例如必须用百度 WAF 规则库拦截 SQL 注入，必须在网关加验证码防止暴力破解）。
- **基线扫描（百度安全中心）**：
  - 场景：你的团队要上线一批云服务器（Linux/Windows），必须保证配置合规。
  - 操作：在服务器上安装 百度安全中心（Baidu Security Center, BSC） 的 Agent。执行 主机基线检查：检查弱口令用户是否存在；是否关闭了 root 远程登录；系统补丁是否打全等，工具会生成基线合规报告，列出“不合规项”。你根据报告在 BSC 控制台一键修复（例如修改口令策略、关闭 23 端口、打补丁）。
- **镜像漏洞扫描（CCE内置安全）**：
  - 场景：你在 百度智能云容器引擎（CCE） 部署微服务，需要确保容器镜像无已知漏洞。
  - 操作：将镜像推送到 百度镜像仓库（Baidu Container Registry, BCR）。开启 CCE 内置安全扫描：自动扫描基础镜像层（如 ubuntu、centos），发现是否有 CVE 高危漏洞；扫描应用依赖库（如 log4j），发现是否存在已知安全漏洞。如果发现漏洞，CCE 会在控制台标红提示，并提供修复建议（升级版本、替换镜像）。  
- **IaC Policy as Code**：
  - 场景：你的团队通过 Terraform/Helm 管理百度云上的 VPC、EIP、CCE 等资源，但有人写的 IaC 配置把安全组端口直接放开给 0.0.0.0/0。
  - 操作：在 CI/CD 流程中引入 百度安全中心（BSC）+ OPA（Open Policy Agent） 策略扫描能力。配置策略规则：不允许安全组对公网开放 22/3389； 存储桶必须启用加密；CCE Service 不允许直接暴露 NodePort。每次有人提交 Terraform/Helm 文件时，BSC 联合策略引擎自动扫描。如果 IaC 配置不合规，Pipeline 直接失败，并在控制台返回不合规项。 

---

## 20. 全球分发 API 加速
- **多Region部署（CCE+RDS）**：
  - 比如在 北京、广州、新加坡 各部署一套 CCE 集群，跑同样的 API 服务。
  - RDS支持 跨 Region 数据复制，保证不同 Region 访问时拿到的数据基本一致。  
- **ITM全局负载均衡**：
  - ITM：百度云的 全局流量调度服务。根据用户的地理位置、链路质量、健康检查结果，把请求分配到最合适的 Region。  
- **CDN缓存（百度智能CDN）**：
  - API 响应中的 静态数据（如商品图片、配置文件）可以缓存到 CDN。动态 API 请求，可以通过 边缘加速链路回源到最近的 Region。    
- **跨地域一致性（最终一致 or 强一致）**：
  - 百度云 RDS MySQL 跨 Region 同步（异步复制 → 最终一致性）。百度云 Redis 全球多活架构（通过 Paxos/Raft → 强一致）。

---

## 21. 健康项目特征
- **范围清晰、目标明确**：
  - 不健康的项目：说要“优化云成本”，但没有明确 KPI，最后谁都说不清到底优化到什么程度才算完成。健康的项目：目标设定为“半年内将云上计算资源成本降低 20%，并在月底前完成 30 台 VM 的迁移”。
- **资源投入匹配**
  - 项目要有与目标匹配的资源（人力、预算、时间、工具）。目标太大但资源不足 → 项目执行中会失控。
- **可量化收益（降本、提效、稳定性）**
  - 降本：通过资源优化、自动扩缩容，把每月云费用降低 30%。提效：上线速度从 1 周缩短到 1 天，开发效率提升。稳定性：系统可用性从 99.5% 提升到 99.95%，宕机时长大幅下降。  

---

## 22. 客户侧需求挖掘
- **客户访谈、业务痛点梳理**:
  - 场景：一家电商客户在“双十一”大促期间，网站经常出现高并发下卡顿甚至宕机的情况。客户觉得“系统不稳定”，但并没有具体描述出问题点。把客户的抽象痛点转换成具体问题：交易支付接口在高并发下响应时间超过 3 秒，导致 5% 用户支付失败。 
- **指标化（成本/性能/稳定性）**：
  - 场景：我希望系统更稳定一些，把需求转化为可度量指标：成本：要求迁移后运维成本下降 20%。性能：支付 API 的响应时间 < 500ms，QPS 提升 2 倍。 稳定性：系统 99.95% SLA，宕机恢复时间 < 5 分钟。
- **小范围POC验证**：
  - 场景：客户希望验证“把数据库迁移到云上是否能承受大促压力”，但直接全量迁移风险太大。
  - 操作：选取一个小业务模块（如订单查询服务）搭建云上测试环境，把真实流量的一部分导入进行压力测试。验证以下指标是否达标：QPS 是否提升？延迟是否降低？。。。

---

## 23. 标书与讲标
- **标书**：详细方案、架构图、预算  
- **讲标**：简洁表达客户价值，聚焦需求对标  
- **区别**：标书偏技术细节，讲标偏沟通与说服  

---

## 24. 报价策略
- **产品**：BOS、CCE、RDS → 毛利高  
- **服务**：实施、运维 → 毛利相对低  
- **组合**：软硬件+服务打包  

---

## 25. 售前日常工作
- 需求调研  
- 方案设计  
- POC验证  
- 投标与客户关系维护  

---

## 26. 投标结果操作空间
- 关系维护  
- 技术差异化展示  
- 商务灵活条款  

---

## 27. 甲方已有内定供应商时
- 陪标策略  
- 关系维护，准备后续机会  
- 控制投入成本  

---

## 28. 出差接受度
- 可接受短期浙江/华东出差  
- 保持工作与生活平衡  

---

## 29. 当前热点方向
- 大模型：百度 **文心大模型**  
- 国产化替代：信创适配（芯片/数据库/OS）  
- FinOps：成本治理自动化  
- 可持续IT：绿色数据中心  

---

## 30. 未来12个月需补齐的三类能力
1. **国产化替代**
   - 百度云信创支持（飞腾/鲲鹏芯片、达梦/金仓数据库、麒麟/统信OS）  
   - 学习路径：做一次MySQL→达梦迁移POC  

2. **FinOps自动化**
   - 百度云费用中心+预算预警  
   - 利用函数计算（CFC）+API实现资源优化  
   - 学习路径：搭建成本分析Dashboard+自动关机脚本  

3. **绿色算力（可持续IT）**
   - 百度绿色智能数据中心  
   - 设计低能耗架构（CCE弹性伸缩+BOS冷热分层存储）  
   - 学习路径：研究白皮书，实践冷热存储+弹性伸缩方案  

---

---

## 一、技术问题（6 道）

### 1. Linux 下如何排查高 QPS 时的系统瓶颈？
**答题思路**：分层 → 工具 → 结论  
- 我会从 **CPU、内存、磁盘 IO、网络** 四个方向排查：  
  - `top/vmstat/free` 去看 整体CPU/内存；
    - 用`ps`定位具体进程
        - 用`dmesg`看具体日志  
  - `iostat` 看磁盘读写瓶颈；(使用率，I/O平均等待) 
  - `sar`、`ss -s` 看网络连接数与吞吐； 
    - ss可以看看具体的已建立的连接数量，timewait的连接数有多少
    - sar -n DEV 1 看看实际的接受速度和发送速度，是不是接近网卡的上限了
  - `nvidia-smi` 看 GPU 使用率。  
- 常见结论是：瓶颈出在网络/存储侧，可以通过扩展节点或优化 LB 规则解决。  

---

### 2. 解释一下 BGP 专线在云上 AI 训练中的作用？
**答题思路**：协议原理 → 应用场景 → 风险点  
- **BGP** 的优势：路径多样性、自动收敛，能保证大带宽与稳定性。  
- 在 **AI 场景**：需要跨 IDC/跨区域传输 TB/PB 级训练数据，BGP 专线保证低延迟高带宽。  
- **注意事项**：要监控路由震荡，配合 QoS 策略，避免训练中断。  

BGP 的好处是多路径和自动收敛，能保证大带宽和稳定性。AI 训练需要跨 IDC 传输大量数据，用 BGP 专线能降低延迟。风险点是路由震荡，所以要加 QoS 策略。

---

### 3. 负载均衡在 AI 业务中的常见问题？
- 四层 LB：性能高，适合推理 API；  
- 七层 LB：支持路由/鉴权，适合多业务混合场景；  
- **风险**：如果没配置好会话保持，分布式训练会因为任务断连而失败。  

训练和推理都依赖 LB。四层 LB 性能更高，适合推理 API；七层 LB 功能更灵活，但要注意会话保持，否则训练可能中断。

---

### 3.1 负载均衡分为哪些类型？有哪些实现方式？

### 3.2 一个用户的请求路径是怎么样的？如何加速用户的请求响应速度？CDN加速的原理？

### 3.3 网关有哪些？网络层，应用层，路由层和云网关？

### 3.4 spark,flink
### 4. GPU 利用率低，可能原因有哪些？
- 显存不足（batch size 太大/太小）；  
- 数据加载 IO 瓶颈（CPU/存储端）；  
- 多卡间通信受限（PCIe、RDMA 没优化）；  
- K8s 调度不合理。  
- **解决办法**：profiling → 优化 batch size → 分布式存储/并发 → NCCL+RDMA。  

---

### 5. 在云上部署 500 卡 GPU 训练集群，架构如何设计？
- **计算**：A100/H800，Slurm/K8s 调度；  
- **网络**：万兆/IB 网络，RDMA；  
- **存储**：分布式文件系统（Ceph/Lustre）；  
- **容器化**：K8s + GPU operator。  
- **价值**：保证扩展性和资源利用率。  

计算层面用 A100/H800，调度用 K8s 或 Slurm；网络用 IB/RDMA；存储用分布式文件系统；容器管理用 GPU operator。这样保证扩展性和资源利用率。

---

### 3. SLA 99.99% 高可用架构设计
- **组件选择**：多可用区/跨Region部署  
- **冗余**：负载均衡+多副本存储  
- **故障划分**：单AZ、单节点故障可容忍  
- **RTO/RPO**：分钟级切换、秒级数据恢复  
- **演练机制**：定期容灾演练

---
### 4. 应对业务流量暴涨 10倍
- **容量预测**：基于历史数据+监控趋势  
- **自动伸缩**：HPA（K8s水平扩容）、弹性伸缩组  
- **流量调度**：限流、熔断、负载均衡  
- **压测**：提前做压力测试验证上限  

---
### 5. 混合云互通设计
- **场景**：IDC + 公有云  
- **专线/VPN/SD-WAN**：根据带宽、延迟、成本选择  
- **路由规划**：CIDR 规划、避免冲突  
- **带宽与延迟控制**：QoS、冗余链路  

---
### 7. 多云/避免厂商锁定
- **抽象层**：服务网格（Istio）、容器平台（K8s）、IaC（Terraform）  
- **统一管理**：身份与权限集中管控  
- **成本分摊**：统一计费/跨云监控 

---
### 9. 微服务体系设计与治理
- **服务治理**：注册发现、熔断限流、灰度发布、金丝雀发布  
- **配置中心**：集中配置+版本回滚  
- **观测性**：日志、指标、链路追踪  

---
### 10. 基础设施即代码（IaC）
- **工具**：Terraform / Pulumi / Ansible  
- **标准**：模块化、可复用  
- **环境隔离**：dev/stage/prod  
- **状态管理**：远程state、锁机制  
- **发布管控**：流水线自动化  

---
### 11. 数据库成为吞吐与扩展瓶颈
- **常见措施**：
  - 读写分离（主从架构）
  - 分库分表（Sharding）
  - 分片路由（中间件/MyCat/ShardingSphere）
  - 数据中台（统一访问层）
  - 缓存双写一致性（Redis + 消息队列，最终一致）
- **目标**：提升吞吐量，避免单点性能瓶颈 

---
### 12. 零信任安全架构/细粒度访问控制
- **方案**：
  - 身份联合（SSO，OIDC/SAML）
  - 临时STS凭证，动态密钥
  - 最小权限（RBAC/ABAC）
  - 零信任基线巡检（设备/身份/环境多因子校验）
- **目标**：杜绝传统“边界安全”，确保访问都可验证  

---
### 13. 合规与数据境要求（等保/ISO/跨境数据）
- **数据保护设计**：
  - KMS（密钥管理）
  - 双层加密（服务端+客户端）
  - 脱敏（Masking）
  - 密钥托管 vs 自主管理（BYOK/HYOK）
- **目标**：满足跨境合规和行业监管要求  

---
### 14. 构建端到端可观测性体系
- **要素**：
  - Metrics（指标：CPU、延迟、QPS）
  - Logs（日志）
  - Trace（链路追踪，Jaeger/Zipkin）
  - Event（事件总线）
- **统一管理**：告警分级，SLO/SLA/SLI 管理  

---
### 15. Serverless 在峰值/平时负载场景
- **适配场景**：
  - 峰值：函数自动弹性，事件驱动  
  - 平时：低成本运行  
- **评估维度**：
  - 冷启动延迟
  - 并发限制
  - 成本优化
  - 调试复杂度  

---
### 16. 企业级 API 管理
- **能力**：
  - 网关分层（API Gateway、Service Mesh）
  - 身份认证（OAuth2/JWT/AK+SK/MTLS）
  - 配额与节流（Rate Limit/Quota）
  - 版本兼容（多版本API治理）
  - 文档治理（Swagger/OpenAPI）  

---
### 17. 推动跨团队标准化落地
- **举例**：统一标签/命名规范；环境基线固化（Dev/Stg/Prod）  
- **挑战**：阻力大、影响范围广  
- **措施**：
  - 高层背书
  - 标准落地指引
  - 度量（合规率、覆盖率）
- **成效**：统一资源治理，提升协作效率  

---
### 18. 云上大规模网络抖动/Region 故障
- **事件响应流程**：
  - 信号检测（监控报警、第三方状态页）
  - War Room 协同
  - 升级路径（技术→管理→客户沟通）
  - 临时缓解（流量切换、多活）  
- **目标**：缩短 MTTR，减少业务损失  

---
### 19. Dev 阶段安全左移（Shift Left）
- **措施**：
  - 威胁建模
  - 合规基线扫描
  - 镜像/依赖漏洞扫描
  - IaC 安全策略（Policy as Code）
- **目标**：问题前置，降低修复成本  

---
### 20. 全球分发的 API 加速方案
- **设计要点**：
  - 多地部署（Region）
  - ITM（全局负载均衡）
  - CDN 缓存层级（边缘节点加速）
  - 跨地域数据一致性策略（最终一致 or 强一致）  
- **目标**：降低延迟，保证高可用  

---
### 6. 如何监控 AI 训练集群的网络性能？
- **指标**：带宽利用率、丢包率、延迟、PPS/FPS。  
- **工具**：`iftop`, `iperf`, Prometheus + Grafana。  
- **应用**：帮助识别模型训练慢是因为带宽瓶颈还是 CPU/GPU 资源问题。  

主要看带宽、延迟、丢包和 FPS。工具可以用 iftop、iperf，或者 Prometheus + Grafana。这样能判断模型训练慢是不是网络瓶颈。

---

## 二、业务问题（5 道）

### 7. 客户 GPU 资源需求大，但云上资源有限，怎么办？
- 建议混合方案：核心训练用高端 GPU（A100/H800），推理或预处理用性价比 GPU；  
- 引导客户用 **Spot 实例 + 弹性调度** 降低 30% 成本；  
- 分阶段交付：先满足关键任务，剩余算力排期。  

我会建议核心任务用高端 GPU，推理或预处理用性价比 GPU。
再结合 Spot 实例和弹性调度，降低成本。必要时分阶段交付，先保障关键任务。

---

### 8. 智能驾驶客户的痛点是什么？
- 端到端训练需要 **低延迟、大带宽**，数据量极大（传感器、视频流）。  
- 难点：数据传输和实时处理。  
- 方案：BGP 专线 + 分布式存储 + 就近地域部署。  
- 价值：保证研发周期，缩短训练迭代。  

他们需要端到端训练，数据量极大，要求延迟低、带宽高。
解决办法是用 BGP 专线做高速传输，配合分布式存储和就近地域部署。

---

### 9. 游戏客户用 AI 生成 NPC/虚拟人，会遇到什么问题？
- 高并发推理 → 需要弹性扩容 LB；  
- 内容安全合规 → 提供安全审查/审核 API；  
- 成本控制 → 用 CPU 预推理 + GPU 实时渲染混合方案。  

---

### 10. 如果客户提出功能当前产品没有，你怎么处理？
- 先安抚客户 → 给临时 workaround；  
- 内部推动研发评估，明确优先级；  
- 向客户同步时间线，避免过度承诺。  
- 价值：维护客户信任，也推动产品迭代。  

---

### 11. 客户要求 SLA 很高，但预算有限怎么办？
- 告诉客户高 SLA = 高成本；  
- 提供分级方案：核心任务高 SLA，非核心任务用低成本资源；  
- 沟通价值：在预算内最大化收益。  

---

## 三、综合问题（4 道）

### 12. 客户抱怨训练速度慢，你怎么处理？
- **表达理解**：理解进度紧张；  
- **排查维度**：硬件（GPU/网络/存储）、软件（框架/并行度）、数据（IO）；  
- **沟通**：分阶段给客户反馈（初步结论 + 后续改进）；  
- **结果**：客户感受到“有人负责”，问题逐步收敛。  

我会先表达理解。
再从硬件（GPU/网络/存储）、软件（框架）、数据（IO）三个层面排查。
沟通上分阶段给客户反馈，让他们知道问题有人跟进。

---

### 13. 你怎么看百度云在 AI 云算力市场的定位？
- 阿里/火山在算力规模和价格上强；  
- 百度云优势：**AI 技术（PaddlePaddle）、智能驾驶、语音识别场景深耕**；  
- 差异化：百度不仅卖 GPU，更能结合 AI 能力给客户做 **端到端落地**。  

阿里和火山在规模和价格上强，但百度云在 PaddlePaddle、智能驾驶、语音识别方面有差异化优势。
百度不仅提供 GPU，还能结合自研 AI 能力，做端到端落地。

---

### 14. 对百度云AI产品的认识

### 15. 了解RAG吗？除了RAG，还有什么可以提高大模型的能力？

### 16. 用过哪些AI框架？
### 14. 如果你作为方案工程师，如何帮助公司完成 100 亿目标？
- 把方案和客户业务绑定：**算力交付 + 行业解决方案（智能驾驶/游戏/互联网）**；  
- 聚焦核心客户（AI 大模型公司），形成标杆案例；  
- 推动内部产品迭代，提高客户复购率。  

我会把算力交付和行业解决方案绑定，聚焦智能驾驶、互联网和游戏大客户，做标杆案例。
同时推动产品迭代，提高客户复购率。

---

### 15. 你最有成就感的技术/项目案例是什么？
- **背景**：某客户遇到资源瓶颈，训练任务经常失败；  
- **行动**：我排查发现是存储 IO 不足，推动采用分布式存储 + 数据并发读取；  
- **结果**：训练时间缩短 30%，客户满意度大幅提升；  
- **反思**：让我认识到技术问题背后，解决的其实是客户的业务目标。  

有一次客户训练任务经常失败，我排查发现是存储 IO 不足。
最后推动用了分布式存储和并发读取，训练时间缩短了 30%。
客户非常满意，也让我体会到技术背后是业务价值。

---
