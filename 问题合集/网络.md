- 通过云厂商的包括GA这样的全球加速设备去加速，具体是如何实现的？
    - 用户 → 云入口：用户在不同国家/地区，访问时要先进入云的边缘节点或入口，没有加速时，走公网复杂路径，可能绕路、跨运营商，延迟高、丢包多。有 GA 后，用户就近进入Anycast边缘节点POP，BGP 自动挑最近的入口。
    - 云入口 → 应用 Region：没有加速时，继续走公共互联网，跨国跨洲时延迟和抖动不可控。有 GA 后，这部分走云厂商的全球骨干专线（高带宽、低丢包、低延迟）。并且有问题的 Region 会被健康检查剔除，流量不会打到坏掉的节点。GA 提供 会话保持 (Session Affinity)，用户和某个 Region 建立连接后不会中途被打散。
    - Region 内部 → 你的后端应用：这部分通常延迟很低，加速重点不在这里，但 GA 能提供 健康探测、流量分配，避免用户打到坏掉的 Region。

- 加速的具体实现的设备，协议或者软件有哪些？
    - POP边缘节点：
        - 设备：高性能路由器（常见 Cisco、Juniper、华为、Arista 等），用于和运营商边界路由器跑 BGP。负载均衡设备（L4/L7，很多云厂商用自研的软件 LB，也可能基于 Envoy、NGINX 等）。防护设备（DDoS 清洗、ACL 防火墙），通常集成在 POP 中。
        - 协议：BGP：POP 向运营商边界路由器宣告 Anycast IP。Anycast + IP 层转发：保证用户请求打到最近的 POP。
    - 云骨干网（Backbone）：
        - 设备：MPLS 核心路由器（运营商级，支持多 Tbps 转发）。光传输设备（DWDM/OTN），跨省跨国的专线通常是光纤波分复用。
        - 协议/技术：**MPLS** (Multiprotocol Label Switching)：让跨骨干的传输快速、低延迟。**SDN** 控制：云厂商会用 SDN 控制器调度骨干流量，实现动态绕障。**QoS**：保证加速流量优先级高于普通 Best Effort 公网流量。
    - region内部：
        - 设备：VPC 网关、虚拟交换机、云内部的 SDN Overlay。应用层 LB（ALB/SLB），负责把流量分发到具体的 VM/容器。
        - 协议：VXLAN/GRE 等隧道协议，用来做虚拟网络 Overlay。内部 BGP/OSPF/IS-IS：在云的自有网络内部做路由收敛。
- BGP(边界网关系统)协议是什么？
    - AS(自治系统)：每个自治系统都有一个编号，比如中国电信AS4134，联通是AS4837。
    - BGP连通方式分为peer和transit
    - 边缘路由器通过BGP去交换路由信息

- 专线除了用BGP协议，还会用：
    - 静态路由


- LB负载均衡实现方式
    - DNS 轮询:在 DNS 层返回多个服务器 IP，用户会随机访问。
    - 四层负载均衡（L4）:基于 IP + 端口 转发（TCP/UDP 层）。
    - 七层负载均衡（L7）:HTTP/HTTPS 协议，可做内容路由。
    - 反向代理型 LB: 常见实现：Nginx、HAProxy、Envoy。
    - 云厂商的托管 LB:百度智能云 BLB / Azure Load Balancer / Application Gateway。

- 什么是FTP传输协议
    - 是最早的 应用层文件传输协议，用来在客户端与服务器之间传输文件。它基于 TCP 协议，默认端口 21
    - 控制连接：默认使用TCP21，传输命令和响应
    - 数据连接：端口号不固定
        - 主动模式（Active Mode）：服务器是20(FTP-data)，客户端告诉服务器自己开放的端口，服务器来建立数据连
        - 被动模式（Passive Mode）：服务器告诉客户端它开放的端口(1024+的随机端口)，由客户端主动去连接，适合穿透防火墙和 NAT。
    > 明文传输用户名和密码，不够安全，容易被窃听。因此现在企业环境里更常用的是 SFTP（基于 SSH）、FTPS（基于 SSL/TLS）

- 会话保持是什么？
    - 会话保持（Session Persistence / Session Stickiness）是负载均衡里的一个机制。它的作用是：让同一个客户端的多次请求始终被分发到同一台后端服务器。

- 常见的状态码
    1. 1xx信息类：100 Continue：客户端可以继续请求。101 Switching Protocols：协议切换（如 HTTP 升级到 WebSocket）。

    2. 2xx成功：200 OK：请求成功。201 Created：资源已成功创建（常见于 POST）。204 No Content：成功但无返回内容。

    3. 3xx重定向：301 Moved Permanently：永久重定向。302 Found：临时重定向。304 Not Modified：缓存可用，客户端可用本地副本。

    4. 4xx客户端错误：400 Bad Request：请求格式错误。401 Unauthorized：未认证，需要登录。403 Forbidden：禁止访问，有权限问题。404 Not Found：资源不存在。429 Too Many Requests：请求过多（常见于限流）。

    5. 5xx服务器错误：500 Internal Server Error：服务器内部错误。502 Bad Gateway：网关错误（上游服务不可用）。503 Service Unavailable：服务暂时不可用（常见于过载或维护）。504 Gateway Timeout：网关超时。

- 听过499吗？

    499 并不是 官方 HTTP 标准状态码（RFC 7231 里没有），它是 Nginx 定义的非标准扩展状态码。
    - 出现场景：客户端在服务器处理完成之前主动关闭了连接。
    - 常见于：
        - 用户在浏览器里点了“停止”或关闭页面。
        - 移动端/接口调用超时，客户端自己断开。
        - API 网关/反向代理（如 Nginx）记录下来的请求被客户端取消。
    - 和408区别：
        - 408 Request Timeout：客户端在发送请求时太慢，服务器主动关闭连接。
        - 499 Client Closed Request：客户端在等待响应时主动断开，服务器被动感知。

- http请求有哪些部分？

    1. 请求行 (Request Line)
    2. 请求头 (Request Headers)
    3. 空行 (CRLF)
    4. 请求体
    ```makefile
    POST /api/v1/user/login?lang=zh-cn HTTP/1.1     ← 请求行
    Host: www.example.com                           ← 目标主机
    User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) Chrome/139.0.0.0
    Accept: application/json, text/plain, */*       ← 客户端可接受的响应类型
    Accept-Encoding: gzip, deflate, br              ← 支持的压缩算法
    Accept-Language: zh-CN,zh;q=0.9,en;q=0.8        ← 语言偏好
    Content-Type: application/json; charset=utf-8   ← 请求体的数据格式
    Content-Length: 52                              ← 请求体字节长度
    Authorization: Bearer abcdef123456              ← 鉴权信息 (token)
    Cookie: session_id=xyz789; theme=dark           ← 会话信息
    Origin: https://www.example.com                 ← 请求源站
    Referer: https://www.example.com/login          ← 请求来源页面
    Connection: keep-alive                          ← 是否复用 TCP 连接
    Cache-Control: no-cache                         ← 缓存控制策略
    X-Forwarded-For: 203.0.113.45                   ← 客户端真实 IP (常见于代理后)
    Upgrade-Insecure-Requests: 1                    ← 建议从 HTTP 升级到 HTTPS

    {                                               ← 请求体 (Body，可选)
    "username": "rui",
    "password": "123456"
    }
    ```
1. tcp三次握手原理，四次挥手tcp三种wait，close_wait，time_wait和fin_wait分别在哪个阶段？

    **答案**：
    - 三次握手：
        - 客户端发送 **SYN → 请求建立连接**。
        - 服务端回复 **SYN+ACK → 确认请求并应答**。
        - 客户端再发 **ACK → 确认应答**，连接建立。
    - 四次挥手：
        - 主动方发 FIN → 请求断开。
        - 被动方回 ACK → 确认请求。
        - 被动方再发 FIN → 表示也要断开。
        - 主动方回 ACK → 连接完全断开。
    
    - **FIN_WAIT**：主动关闭方发出 FIN 后，等待对方的 ACK。
    - **CLOSE_WAIT**：被动关闭方收到 FIN 后，进入等待自己应用关闭的状态。
    - **TIME_WAIT**：主动关闭方最后收到对方 FIN+ACK 后进入，等待 2MSL，防止旧包干扰。
2. https和http的区别，为什么用https？HTTPS 加密如何保证信息安全？

    **答案**：
    HTTP **明文传输**，HTTPS 在其上加 **SSL/TLS 加密**。利用**对称加密（传输快）、非对称加密（交换密钥）、数字证书（保证身份）**来实现。
3. ssl/tls协议，加密用什么算法？握手阶段做了什么？

    **答案**：
    - 握手阶段：**非对称加密（RSA 或 ECDHE）**用于密钥交换。
    - 会话阶段：**对称加密（AES、ChaCha20）**用于数据加密。
    - 完整性：**哈希（SHA-256 等）**保证数据不被篡改。
    - 握手阶段做的事：身份认证（证书）、协商加密算法、交换密钥，最后生成会话密钥。

4. 对称与非对称加密分别是什么？

    **答案**：
    - 对称加密：同一密钥加解密，速度快（AES）。
    - 非对称加密：公钥加密，私钥解密，速度慢但安全性高（RSA、ECC）。
5. 网络协议中dns域名解析的工作原理？

    **答案**：用户输入域名 → 浏览器检查缓存 → **本地 DNS 解析器查询** → 若无结果则**递归查询根服务器**、**顶级域名服务器**、**权威服务器** → 返回 IP。
6. 服务器遇到404,502,301报错如何处理？

    **答案**：
    - **404**：资源不存在 → 检查URL、路径、路由配置。
    - **502**：网关错误 → 检查后端服务是否宕机或负载均衡配置。
    - **    **：永久重定向 → 检查 Nginx/Apache 配置是否正确。
7. 服务器部署了一个web服务，使用起来发现响应很慢，如何排查？

    **答案**：
    - 服务器资源：CPU、内存、磁盘IO。
    - 网络问题：带宽、延迟、丢包。
    - 应用层：代码性能、数据库查询慢、缓存命中率低。
    - 中间件：负载均衡、反向代理配置。
8. tcp的拥塞控制？

    **答案**：
    - 慢启动：初始小窗口，逐渐增大。
    - 拥塞避免：加法增大，乘法减小。
    - 快速重传/快速恢复：收到冗余ACK时提前重传，避免超时。
9. 解释OSI模型的七层及其功能，每一层的典型网络协议。

    **答案**：
    - L1物理层：比特传输 → 光纤、网线。
    - L2数据链路层：点对点传输 → MAC、ARP。
    - L3网络层：寻址与路由 → IP、ICMP。
    - L4传输层：端到端传输 → TCP、UDP。
    - L5会话层：管理会话 → RPC、NetBIOS。
    - L6表示层：数据格式转换 → SSL、TLS、JPEG。
    - L7应用层：提供服务 → HTTP、DNS、SMTP。
10. dns两个模式分别是什么？

    **答案**：
    - 递归查询：本地 DNS 全权负责查询，直到拿到结果。
    - 迭代查询：本地 DNS 逐级向根、顶级、权威服务器请求。

11. cdn是什么？有什么作用？cdn本身可以直接提供服务吗？还是作为中转

    **答案**：
    - 是什么：内容分发网络，在各地布置节点，将静态资源缓存到离用户最近的节点。
    - 作用：加速访问、减轻源站压力、抗DDOS。
    - 能否直接提供服务：CDN通常作为缓存和中转，动态请求依旧回源服务器。
12. 说一说你了解的Private Link，为什么企业要使用private link:

    **答案**：
    大多数情况下，CDN 充当中转代理（Proxy），它的主要作用是：
    - 存静态资源（HTML、CSS、JS、图片、视频等）。
    - 转发动态请求到源服务器（如数据库查询、API 请求）。
    - 加速访问，减少源站负载。
