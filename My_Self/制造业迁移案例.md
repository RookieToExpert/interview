#### 痛点：
1. 实时性
2. 高可用约束，停机窗口要求毫秒级
3. 部分服务器因版本，特殊协议及数据合规原因，需保留至本地。

#### 解决方案：
过度，前期的迁移规划包括排期方案，迁移顺序，回滚方案，云上landing等已经由架构师和售前技术团队和客户协商完成，我们团队主要聚焦于迁移的技术方案和实施，具体体现在：
1. 迁移线路搭建
    1. 通过Azure Migrate进行迁移。区分物理机，Hyper-V和VMware虚拟机，采用不同的迁移策略和工具。
    2. 物理机通过agent-based方式迁移，hyper-v和vmware通过agentless方式迁移。
    3. 建立appliance迁移服务器，确保迁移服务器可以与源服务器通过9443端口通信：
        - control plane：将源服务器的元数据通过迁移服务器走公网迁移至云端。
        - data plane：将源服务器的数据通过迁移服务器走专线迁移至云端。
    4. 通过ansible脚本批量安装迁移代理到物理服务器上，减少人工操作。
    5. 通过azure migrate的工具，评估迁移服务器的兼容性，性能和带宽需求。配置对应的带宽策略，错峰复制，不占用业务高峰期的带宽。
    6. 进行初始全量复制和增量复制，通过bitmap及checksum的对比，确保数据一致性。
    7. 进行影子测试，确保迁移后的服务器可以正常启动和运行。期间会进行金丝雀测试，确保部分服务器在云端可以正常工作。
    8. 正式割接阶段，进行最终的增量复制，确保数据的最新性。进行DNS切换，确保用户可以访问云端的服务器。
> 理论上我们团队的工作到此为止
2. 当然我知道，迁移的整体项目不仅仅只是简单的将服务器搬到云上，还包括后续的优化和运维工作。
    1. 后期优化和运维包括
        - 监控和报警：通过Azure Monitor和Log Analytics，监控服务器的性能和健康状态，设置报警规则，及时发现和处理问题。
        - 成本优化：通过Azure Cost Management，分析和优化云资源的使用，降低成本。
        - 安全合规：通过Azure Security Center，确保服务器的安全性和合规性，防范潜在的威胁。
        - 备份和恢复：通过Azure Backup和Site Recovery，确保数据的安全性和可恢复性，防止数据丢失。
        - 自动化运维：通过Azure Automation和Runbook，实现常见运维任务的自动化，提高效率和准确性。
        - 定期审计和评估：定期审计服务器的配置和使用情况，评估云资源的性能和成本，持续优化和改进。
    2. 通过这些措施，确保迁移后的服务器可以稳定，高效和安全地运行在云端，满足业务的需求和挑战。
